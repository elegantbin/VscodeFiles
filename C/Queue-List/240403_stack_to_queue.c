#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <stdbool.h> 
/*
1.????type?int?????龢???????妊?100
    ??????stackIn??????????????????stackOut??????????????????
2.???????stackInTop??stackOutTop???????????
*/
typedef struct 
{
    int stackInTop, stackOutTop;
    int stackIn[100], stackOut[100];
}MyQueue;

/*
1.??????????快??妊???
2.?????stackInTop??stackOutTop??????0
3.???????????
*/
MyQueue* myQueueCreate(){
    MyQueue *queue = (MyQueue*)malloc(sizeof(MyQueue));
    queue->stackInTop = 0;
    queue->stackOutTop = 0;
    return queue;
}

/*
???????????????,???????????+1
*/
void myQueuePush(MyQueue *obj, int x){
    obj->stackIn[(obj->stackInTop)++] = x;
}

/*
1.??????????????????????????stackInTop>0?????????????????????????????孝?stackOut[stackTop2++] = stackIn[--stackTop1])
2.???????????
3.??stackTop2>0????????????????????????????(stackIn[stackTop1++] = stackOut[--stackTop2])
*/
int myQueuePop(MyQueue *obj){
    int stackInTop = obj->stackInTop;
    int stackOutTop = obj->stackOutTop;
    //?忪???????????
    if(stackOutTop == 0){
        //????????快??????????????
        while(stackInTop > 0){
            obj->stackOut[stackOutTop++] = obj->stackIn[--stackInTop];
        }
    }
   /* ????????? ????*/
    int top =  obj->stackOut[--stackOutTop];
    /* ????????????????????? */
    while(stackOutTop > 0){
        obj->stackIn[stackInTop++] = obj->stackOut[--stackOutTop];
    }
    // ??????????
    obj->stackInTop = stackInTop;
    obj->stackOutTop = stackOutTop;
    //??????快????????
    return top;
}

////??????????快???????
int myQueuePeek(MyQueue *obj){
        return obj->stackIn[0];
}

//??????????0??????????????
bool myQueueEmpty(MyQueue *obj){
    return obj-> stackInTop == 0 && obj->stackOutTop == 0;
}

//??????????0
void myQueueFree(MyQueue *obj){
    obj->stackInTop = 0;
    obj->stackOutTop = 0;
}

int main(){
    MyQueue *myqueue = myQueueCreate();
    int peek[] = {0}, pop[] = {0};
    printf("test");
    for(int i=0; i<6;i++){
        myQueuePush(myqueue, i);
    }
    for(int i=0; i<6;i++){
         peek[i] = myQueuePeek(myqueue);
         pop[i] = myQueuePop(myqueue);
    }
    for(int i=0; i<6;i++){
        printf("the peek[%d] is %d\n", i, peek[i]);
        printf("the pop[%d] is %d\n\n", i, peek[i]);
    }
    printf("the pon\n");
    return 0;
}

